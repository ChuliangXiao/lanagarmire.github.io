<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet"
  href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
  integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
  crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet"
  href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
  integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
  crossorigin="anonymous">

<style>
  .container {
    margin-top: 20px;
    max-width: 500px;
  }
</style>
</head>
<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-body">
          <form id="infoForm" class="form-horizontal" action="javascript:void(0);" method="GET">
            <fieldset>
              <legend>Access to the repository of Granatum</legend>
              <p>Please give us your name, institution, and email address (*.edu only) for access:</p>
              <div class="form-group">
                <div class="col-lg-12">
                  <div class="checkbox">
                    <label>
                      <input id="checkAnonymous" type="checkbox">I'm a reviewer and would like to remain anonymous
                    </label>
                  </div>
                </div>
              </div>
            </fieldset>
            <fieldset id="infoSet">
              <div class="form-group">
                <label for="inputName" class="col-lg-3 control-label">Name</label>
                <div class="col-lg-9">
                  <input type="text" class="form-control" id="inputName" placeholder="Name">
                </div>
              </div>
              <div class="form-group">
                <label for="inputInstitution" class="col-lg-3 control-label">Institution</label>
                <div class="col-lg-9">
                  <input type="text" class="form-control" id="inputInstitution" placeholder="Institution">
                </div>
              </div>
              <div class="form-group">
                <label for="inputEmail" class="col-lg-3 control-label">Email</label>
                <div class="col-lg-9">
                  <input type="text" class="form-control" id="inputEmail" placeholder="Email">
                </div>
              </div>
            </fieldset>
            <div class="form-group">
              <div class="col-lg-9 pull-right">
                <input id="submitButton" type="submit" class="btn btn-primary" value="Submit"></input>
                <span id="submitMsg" class="help-block"></span>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Latest compiled and minified JavaScript -->
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
  $('#checkAnonymous').on('click', function(){
    if ($('#checkAnonymous').is(':checked')) {
      $('#infoSet').find('*').prop( "disabled", true )
    } else {
      $('#infoSet').find('*').prop( "disabled", false )
    }
  })

  $('#infoForm').on('submit', function(){
    if (!$('#checkAnonymous').is(':checked')) {
      if (!$('#inputName').val().match(/.+ .+/)) {
        $('#submitMsg').text('Please input your full name.')
        return
      }
      if ($('#inputInstitution').val() == "") {
        $('#submitMsg').text('Please input your institution.')
        return
      }
      if (!$('#inputEmail').val().match(/.+@.+\.edu/)) {
        $('#submitMsg').text('Sorry, only ".edu" email address is accepted.')
        return
      }
    }
    $('#submitMsg').text("Redirecting ...")
    window.location.href = "https://gitlab.com/uhcclxgg/granatum"
  })
</script>
</body>
</html>
